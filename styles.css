@font-face {
  font-family: "OldEnglishMT";
  src: url("fonts/OLDENGLISHTEXTMT.TTF") format("truetype");
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: "OMORI_GAME";
  src: url("fonts/OMORI_GAME2.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
}

/* ============================= */
/*          VARIÁVEIS CSS        */
/* ============================= */
:root {
  --bg-deep: #0b0712;
  --accent: #d9b47a;
  --paper: #fffaf0;
  --cover-green: #2a4a3a;
  --muted: #9b89a6;
  --shadow: rgba(0,0,0,0.6);
  --grain: rgba(255,255,255,0.02);
  --spine-width: 12px;
  --cover-scale: 1.07;
  --cover-left-off: -3%;
  --cover-color-top: #A66BFF;
  --spine-dark: #6b3ed6;
  --spine-dark2: #4f2bb8;
  --spine-grain: rgba(255,255,255,0.03);

  --portal-glow: rgba(160, 100, 255, 0.15);
  --portal-border: rgba(150, 100, 255, 0.3);
  --portal-smoke-light: rgba(58, 14, 163, 0.45);
  --portal-smoke-dark: rgba(40, 5, 120, 0.55);
}

/* ============================= */
/*          RESET & FONTES       */
/* ============================= */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  font-family: 'Nunito', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
  background: linear-gradient(180deg, var(--bg-deep), #22152a);
  color: #efe8f3;
  -webkit-font-smoothing: antialiased;
}

@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

body, .caption-box, .photo-placeholder, .chapter, .thumb {
  font-family: 'OMORI_GAME2', monospace;
  color: #fff;
  letter-spacing: 0.5px;
}

/* ============================= */
/*             SCENE             */
/* ============================= */
.scene {
  min-height: 100vh;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sky { display: none !important; }

/* ============================= */
/*             GRAMA             */
/* ============================= */
.grass-area {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 35vh;
  overflow: hidden;
  pointer-events: auto;
  z-index: 2;
}

#grassSVG { width: 100%; height: 100%; }

/* ============================= */
/*            BIGCAT             */
/* ============================= */
.bigcat {
  position: absolute;
  top: -200px;
  right: 0;
  width: 300px;
  height: 300px;
  background: url("pixil-frame-0.png") center/contain no-repeat;
  z-index: 310;
  pointer-events: none;
  overflow: visible;
  animation: bigcat-breath 1s ease-in-out infinite, bigcat-move 8s ease-in-out infinite alternate;
  transform-style: preserve-3d;
}

.cat-ear {
  position: absolute;
  width: 360px;
  height: 360px;
  pointer-events: none;
  background-position: center;
  background-size: contain;
  background-repeat: no-repeat;
  z-index: 125;
  transform-origin: bottom center;
}

.left-ear {
  top: -10px;
  left: -7px;
  background-image: url("orelha-esquerda.png");
  animation: ear-left-wiggle 4s ease-in-out infinite;
}

.right-ear {
  top: -10px;
  right: -7px;
  background-image: url("orelha-direita.png");
  animation: ear-right-wiggle 6s ease-in-out infinite;
}

.cat-arms {
  position: absolute;
  width: 320px;
  height: 160px;
  left: 50%;
  top: 32%;
  transform: translateX(-50%) translateY(0) rotate(0deg);
  background: url("arms.png") center/contain no-repeat;
  z-index: 100;
  pointer-events: none;
  transition: transform 0.35s cubic-bezier(.4,.0,.2,1);
}

.cat-arms.pull-open { transform: translateX(-50%) translateY(-14px) rotate(-7deg); }
.cat-arms.pull-close { transform: translateX(-50%) translateY(0px) rotate(0deg); }
.cat-arms.fast { transition-duration: 0.2s !important; }

/* ============================= */
/*         ANIMAÇÕES BIGCAT      */
/* ============================= */
@keyframes arm-flip {
  0%   { transform: translateX(-50%) translateY(0) rotate(0deg); }
  30%  { transform: translateX(-50%) translateY(-8px) rotate(5deg); }
  60%  { transform: translateX(-50%) translateY(-4px) rotate(2.5deg); }
  100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
}

@keyframes arm-open {
  0%   { transform: translateX(-50%) translateY(0) rotate(0deg); }
  40%  { transform: translateX(-50%) translateY(-12px) rotate(6deg); }
  70%  { transform: translateX(-50%) translateY(-6px) rotate(3deg); }
  100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
}

@keyframes arm-close {
  0%   { transform: translateX(-50%) translateY(0) rotate(0deg); }
  40%  { transform: translateX(-50%) translateY(-8px) rotate(-5deg); }
  70%  { transform: translateX(-50%) translateY(-4px) rotate(-2.5deg); }
  100% { transform: translateX(-50%) translateY(0) rotate(0deg); }
}

@keyframes ear-left-wiggle {
  0%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(-0.5deg); }
  70% { transform: rotate(0.5deg); }
}

@keyframes ear-right-wiggle {
  0%, 100% { transform: rotate(0deg); }
  30% { transform: rotate(0.5deg); }
  70% { transform: rotate(-0.5deg); }
}

@keyframes bigcat-breath {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-2px) scale(1.01); }
}

@keyframes bigcat-move {
  0% { transform: translate(0,0); }
  50% { transform: translate(-3px,2px); }
  100% { transform: translate(3px,-1px); }
}

@media (max-width: 980px) {
  .bigcat { width: 360px; height: 360px; top: -40px; right: -25px; }
  .cat-ear { width: 360px; height: 360px; }
  .cat-arms { width: 360px; height: 360px; top: 60%; }
}

/* ============================= */
/*            FUNDO              */
/* ============================= */
.bg-loop { position: fixed; inset:0; overflow:hidden; z-index:0; }

.bg-layer {
  position: fixed;
  top: 0;
  left: 0;

  background-image: url('fndomori.png');
  background-repeat: repeat; /* repete em ambas direções */
  background-size: auto;     /* usa o tamanho REAL */
  background-position: top center; /* centraliza */
  image-rendering: pixelated; /* estilo Omori, opcional */

  /* ⬇ Faz a imagem repetir verticalmente ocupando toda a tela */
  width: 100%;
  height: 100vh;

  filter:
    brightness(1.12)
    contrast(0.92)
    saturate(0.55)
    hue-rotate(-4deg)
    blur(0.6px);

  opacity: 0.88;
  animation: scrollBg 58s linear infinite;
  inset: 0;
}

.bg-layer:nth-child(2) {
  top: -100%;
  opacity: 0.9;
}

@keyframes scrollBg {
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}

.bg-overlay {
  position: fixed; /* mudar de absolute para fixed */
  inset: 0;
  background: linear-gradient(to bottom, rgba(20, 10, 30, 0.11), rgba(40, 20, 50, 0.6));
  pointer-events: none;
  z-index: 1; /* sempre atrás do overlay e jogo */
}

.bg-glow {
  position: fixed; /* mudar de absolute para fixed */
  inset: 0;
  background: radial-gradient(circle, rgba(255,255,255,0.12) 0%, transparent 80%);
  animation: glowPulse 6s ease-in-out infinite alternate;
  z-index: 2; /* acima do overlay mas ainda atrás do gancho e jogo */
  pointer-events: none;
}


@keyframes glowPulse {
  0% { opacity:0.1; }
  100% { opacity:0.25; }
}

.bg-particles {
  position: absolute;
  inset:0;
  pointer-events: none;
  z-index: 1;
}

.particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(255,255,255,0.15);
  border-radius: 50%;
  animation: float 20s linear infinite;
}

@keyframes float {
  0% { transform: translateY(100vh) translateX(0); opacity:0; }
  50% { opacity:1; }
  100% { transform: translateY(-10vh) translateX(50vw); opacity:0; }
}

/* ============================= */
/*            MIST CSS           */
/* ============================= */
.bg-mist {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background: 
    radial-gradient(circle, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0) 70%),
    radial-gradient(circle, rgba(200,200,255,0.08) 0%, rgba(255,255,255,0) 60%);
  background-size: 200% 200%;
  animation: driftMist 120s linear infinite;
}

@keyframes driftMist {
  0% { background-position: 0% 0%, 100% 100%; }
  50% { background-position: 50% 50%, 50% 50%; }
  100% { background-position: 100% 0%, 0% 100%; }
}

body::before {
  content:"";
  position: fixed;
  inset:0;
  pointer-events:none;
  background: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px);
  background-size: 4px 4px;
  z-index:0;
}

.bg-particles-extra {
  position: absolute;
  inset:0;
  pointer-events: none;
  z-index:1;
}

.particle-extra {
  position: absolute;
  width: 3px;
  height: 3px;
  border-radius: 50%;
  opacity: 0.05;
  background: radial-gradient(circle, rgba(180,180,255,0.3) 0%, transparent 70%);
  animation: floatExtra 30s linear infinite;
}

.particle {
  animation: float 20s linear infinite;
}

@keyframes floatExtra {
  0% { transform: translateY(120vh) translateX(0); opacity:0; }
  50% { opacity:0.15; }
  100% { transform: translateY(-20vh) translateX(60vw); opacity:0; }
}

.bg-cloud {
  position: absolute;
  width: 200px;
  height: 100px;
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.08) 0%, transparent 70%);
  border-radius: 50%;
  pointer-events: none;
  z-index:1;
  animation: cloudDrift 90s linear infinite;
}

@keyframes cloudDrift {
  0% { transform: translate(-50px, 20vh) scale(1); }
  50% { transform: translate(50vw, 25vh) scale(1.1); }
  100% { transform: translate(100vw, 30vh) scale(1); }
}

/* ============================= */
/*     TEXTURA DE PAPEL SUTIL    */
/* ============================= */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  background:
    /* pequenos pontos de grão */
    radial-gradient(rgba(0,0,0,0.02) 1px, transparent 1px) 0 0 / 4px 4px,
    radial-gradient(rgba(0,0,0,0.01) 1px, transparent 1px) 2px 2px / 4px 4px,
    /* listras suaves simulando fibras */
    linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px) 0 0 / 100% 2px;
  background-blend-mode: overlay;
}

/* ============================= */
/*            PORTRAITS           */
/* ============================= */

.portrait-container {
  position: absolute;
  top: 100px;
  left: 100px;
  width: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  overflow: visible;
  z-index: 0;
  transition: transform 0.4s ease;
}

.photo-support {
  position: absolute;
  top: -10px; left: -10px; right: -10px; bottom: -10px;

  background-color: #f8f4ec; /* cor base do papel estilo Omori */

  /* textura de papel ultra realista */
  background-image: 
    radial-gradient(rgba(0,0,0,0.02) 1px, transparent 1px),
    radial-gradient(rgba(0,0,0,0.015) 1px, transparent 1px),
    linear-gradient(45deg, rgba(0,0,0,0.005) 25%, transparent 25%, transparent 50%, rgba(0,0,0,0.005) 50%, rgba(0,0,0,0.005) 75%, transparent 75%, transparent);
  background-size: 4px 4px, 7px 7px, 10px 10px;
  background-position: 0 0, 3px 3px, 0 0;

  border-radius: 2px;

  /* sombra realista externa */
  box-shadow: 
    0 12px 24px rgba(0,0,0,0.3),  /* sombra principal */
    0 4px 6px rgba(0,0,0,0.15) inset; /* leve relevo interno */

  z-index: 10;

  /* pequenos ajustes de profundidade */
  filter: contrast(1.05) brightness(1.03);
}

.tape-realista {
  position: absolute;
  top:-50px; left:100px;
  width:60px; height:14px;
  background: linear-gradient(145deg, rgba(248,217,108,0.95), rgba(240,200,80,0.9));
  border-radius:4px;
  box-shadow:0 2px 4px rgba(0,0,0,0.3), inset 0 1px 1px rgba(255,255,255,0.35), inset 0 -1px 1px rgba(0,0,0,0.25);
  transform: rotate(-2deg);
  clip-path: polygon(0 0, 100% 0, 90% 100%, 10% 100%);
  z-index:25;
}

.photo-square {
  position: relative;
  width: 100%;
  aspect-ratio: 1/1;
  border-radius: 2px;
  overflow: visible;
  background: transparent;
  z-index: 60;

  /* sombra externa para parecer colado no suporte */
  box-shadow: 
    0 4px 12px rgba(0,0,0,0.35), /* sombra suave */
    0 0 0 2px rgba(255,255,255,0.05); /* leve brilho externo */
  transition: box-shadow 0.3s ease;
}

.photo-square img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: transform 0.4s ease, filter 0.4s ease;

  /* filtro suave estilo Headspace */
  filter:
    brightness(1.05)   /* levemente mais claro */
    contrast(1)        /* mantém contraste natural */
    saturate(0.85)     /* cores um pouco suavizadas */
    hue-rotate(-2deg); /* ajuste bem sutil de tom */
}

body, .caption-box, .photo-placeholder, .chapter, .thumb {
  font-family: 'OMORI_GAME2', monospace;
}

.caption-box {
  opacity: 0;           /* invisível por padrão */
  position: relative;
  top: 5px;
  font-size: 20px;
  line-height: 1.4em;
  color: #fff;
  background: rgba(0,0,0,0.6); /* caixa preta */
  padding: 8px 12px;
  border-radius: 6px;
  min-width: 200px;
  max-width: 320px;

  display: -webkit-box;
  -webkit-box-orient: vertical;
  overflow: hidden;

  transition: opacity 0.3s ease;
  z-index: 120;
  pointer-events: none; /* não interfere nos cliques */
}

.caption-box::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 6px;
  background: linear-gradient(145deg, rgba(0,0,0,0.95), rgba(0,0,0,0.9));
  border: 2px solid #fff;
  z-index: -1;
  pointer-events: none;
}

.wrap-black, .wrap-white {
  position: relative;
  display: inline-block;
}

.wrap-black::before, .wrap-white::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 6px;
  background: linear-gradient(145deg, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.9));
  border: 2px solid #fff;
  z-index: 0;
  pointer-events: none;
}

.portrait-container.zoomed {
  transform: rotate(0deg) scale(var(--zoom,1));
  z-index:70;
  transition: transform 0.4s ease;
}

.portrait-container.zoomed .caption-box {
  opacity: 1;            /* aparece só quando a foto está em zoom */
  pointer-events: auto;  /* volta a poder interagir */
  max-height: none;
  white-space: normal;
}

#overlay {
  position: fixed; inset:0;
  background: rgba(0,0,0,0.5);
  opacity:0;
  pointer-events:none;
  transition: opacity 0.3s ease;
  z-index:60;
}

.photo-square {
  position: relative;
  width: 100%;
  aspect-ratio: 1/1;
  border-radius: 2px;
  overflow: visible;
  background: transparent;
  z-index: 60;

  /* sombra externa realista */
  box-shadow: 
    4px 6px 12px rgba(0,0,0,0.35),  /* sombra principal, deslocada pra baixo e direita */
    0 0 0 2px rgba(255,255,255,0.03), /* leve brilho externo */
    inset 0 1px 2px rgba(255,255,255,0.15); /* leve brilho interno para profundidade */
  transition: box-shadow 0.3s ease;
}

.photo-square img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  border-radius: 2px;
  transition: transform 0.4s ease, box-shadow 0.3s ease;
}

/* opcional: sombra mais intensa quando em zoom */
.portrait-container.zoomed .photo-square {
  box-shadow: 
    8px 12px 24px rgba(0,0,0,0.45), /* sombra mais forte e espalhada */
    0 0 0 2px rgba(255,255,255,0.03),
    inset 0 2px 4px rgba(255,255,255,0.15);
}

/* ============================= */
/*             LIVRO             */
/* ============================= */
.book-wrap {
  position: absolute;
  top: 140px; 
  left: 50%;
  transform: translateX(-50%) translateY(0);
  perspective: 1500px;
  z-index: 10;
  height: auto;
  width: auto;
  transition: transform 1s ease; /* suaviza o movimento para o centro */
}

/* Classe que ativa quando o livro abre */
.book-wrap.centered {
  transform: translate(-50%, -50%); /* move para o centro exato da tela */
  top: 50%;
  left: 50%;
}

.book {
  cursor: pointer;
  width: 400px; height: 500px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 1s ease, width 1s ease;
  pointer-events: auto;
}

/* CSS do livro */
#book {
  transform-origin: center center; /* o livro abre a partir do centro */
  transition: transform 0.6s cubic-bezier(.22,.9,.33,1);
}


/* ============================= */
/*     PLACA DOURADA — CAPA     */
/* ============================= */

.front-title-wrap {
  position: absolute;
  top: 22%;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  z-index: 99999;
  pointer-events: none;
}

.title-top-row {
  display: flex;
  align-items: baseline;
  gap: 4px;
}

.gold-plate {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 22px;
  background: url("placadourada.png") center/contain no-repeat;
  background-color: transparent;
  height: auto;
  width: auto;
  box-sizing: content-box;
}

.gold-plate-text {
  font-family: "OldEnglishMT", serif;
  font-size: 1.45rem;
  line-height: 1;
  color: #3f260a;
  white-space: nowrap;
  text-shadow:
    0 1px 0 rgba(255,255,255,0.45),
    0 -1px 0 rgba(0,0,0,0.45);
}

.small-s {
  font-family: "OldEnglishMT", serif;
  font-size: 1.32rem;
  line-height: 1;
  color: #ffffff;
  text-shadow:
    0 2px 3px rgba(0,0,0,0.55),
    0 0 4px rgba(255,220,120,0.35);
  vertical-align: baseline;
  margin-left: 0;
  padding: 0;
}

.album-subtitle {
  font-family: "OldEnglishMT", serif;
  font-size: 1.75rem;
  letter-spacing: 2px;
  color: #ffffff;
  margin-top: -2px;
  line-height: 1.3;
}

.cover, .page {
  width:100%; height:100%; position:absolute; top:0; left:0;
  transform-style: preserve-3d; backface-visibility:hidden;
  border-radius:4px; transition: transform 1s ease, z-index 0.5s ease;
  pointer-events: auto;

}

.cover.front {
  transform-origin: left;
  background: var(--cover-color-top);
  border: 3px solid #8C53E6;
  left: -4%;
  top: 0%;
  z-index: 999; 
}

/* ============================= */
/*          LOMBADA OCULTA       */
/* ============================= */
.cover-spine {
  position: absolute;
  top: 0%;
  left: -5.5%;
  width: var(--spine-width, 12px);
  height: 100%;
  background: linear-gradient(135deg, #6f42c1, #4b2c91);

    background-image: repeating-linear-gradient(
    45deg,
    rgba(255,255,255,0.05),
    rgba(255,255,255,0.05) 1px,
  );

  border-radius: 6px;
  transform-origin: left;
  transform: rotateY(0deg);
  z-index: 0; 
  pointer-events: none;
  transition: transform 1s ease;
  
  box-shadow: inset 0 0 4px rgba(0,0,0,0.5);
}

.book .cover.front.open ~ .cover-spine {
  transform: rotateY(0deg);
}

.cover.front::before,
.cover.back::before {
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  z-index:2;

  background-color: var(--cover-color-top);

  background-image:
    repeating-linear-gradient(45deg, rgba(255,255,255,0.03) 0 2px, transparent 2px 4px),
    repeating-linear-gradient(-45deg, rgba(0,0,0,0.02) 0 2px, transparent 2px 4px);

  background-blend-mode: overlay;
}


.cover.front.open {
  transform: rotateY(-180deg);
  z-index: auto;
}

.cover.front.bring-to-front {
  z-index: 999999 !important;
  position: relative !important;
  pointer-events: none;
}

.cover.front.bring-to-front * {
  z-index: 999999 !important;
  position: relative;
}

.cover.front::after {
  pointer-events: none;
  content: "";
  position: absolute;
  inset: 0;
  background: inherit;
  border-radius: inherit;
  z-index: auto;
  transform: rotateY(180deg);
  backface-visibility: hidden;
  border: 4px solid #8C53E6;
}

.cover.back {
  height: 99%;
  top: 0.4%;
  left: -4%;
  transform: rotateY(180deg);
  background: var(--cover-color-top);
  border: 3px solid #8C53E6;
  z-index: 0;
  backface-visibility: visible;
}

.page {
  background-color: yellow !important;
  border-radius: 6px;
  position: absolute;
  top: 0.1%;
  left: -4%;
  width: 98%;
  height: 99%;
  padding: 12px;
  box-sizing: border-box;

  transform-origin: left;
  transform: rotateY(0deg);
  z-index: 50;
  backface-visibility: hidden;

  transition: transform 1s ease, z-index 0.5s ease, left 1s ease, top 1s ease;
}

.page.flipped {
  border-radius: 6px;
  transform: rotateY(-180deg);
  pointer-events: none;
  z-index: 40;
}

.page-front, .page-back {
  top: 0.5%;
  border-radius: 6px;
  position: absolute;
  inset: 0;
  background: var(--paper);
  border-radius: 4px;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.1);
  backface-visibility: hidden;
}

.page-back {
  transform: rotateY(180deg);
}

/* ============================= */
/*          MEDIA QUERIES        */
/* ============================= */
@media (max-width:980px) {
  .bigcat { width:360px; height:360px; top:-40px; right:-25px; }
  .cat-ear { width:360px; height:360px; }
  .cat-arms { width:360px; height:360px; top:60%; }
}

#thumbGrid, #photoArea {
  pointer-events: none;
}

/* ============================
   CATA-VENTO — ESTILO OMORI
   ============================ */

.pinwheel-container-ace {
  position: fixed;
  top: 60%;
  left: 80%;
  width: 180px;
  height: 280px;
  z-index: 1;
  overflow: visible;
  pointer-events: none;
}

.pinwheel-svg-ace {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.pin-haste {
  fill: #2b3a42;
  stroke: rgba(0, 0, 0, 0.25);
  stroke-width: 1;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4));
}

.blade-ace {
  fill: #7fc9ff;
  stroke: rgba(0,0,0,0.2);
  stroke-width: 1;

  filter:
    drop-shadow(0 1px 2px rgba(0,0,0,0.2))
    contrast(1.2)
    brightness(1.05)
    saturate(0.9);

  background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.05));
}

.b1 {
  fill: #7fc9ff;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b2 { 
  fill: #71bfff; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b3 { 
  fill: #6ab5ff; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b4 { 
  fill: #66abff; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}

.hub-ring-ace { fill: #d9f2ff; stroke: rgba(0,0,0,0.2); }
.hub-core-ace { fill: #083a5a; }

.pinwheel-rotate-ace {
  transform-origin: 100px 100px;
  animation: spin 3s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

.pinwheel-container-brun {
  position: fixed;
  top: 60%;
  left: 0%;
  width: 180px;
  height: 280px;
  z-index: 1;
  overflow: visible;
  pointer-events: none;
}

.pinwheel-rotate-brun {
  transform-origin: 100px 100px;
  animation: spin 3s linear infinite;
}

.pinwheel-svg-brun {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.blade-brun {
  fill: #ff7f7f;
  stroke: rgba(0,0,0,0.2);
  stroke-width: 1;

  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.25));

  background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.05));
}

.b1red { 
  fill: #ff7f7f; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b2red { 
  fill: #ff6e6e; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b3red { 
  fill: #ff6666; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}
.b4red { 
  fill: #ff7676; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.2)) brightness(1.05) contrast(1.1);
}

.hub-ring-brun { fill: #d9d9d9; stroke: rgba(0,0,0,0.2); }
.hub-core-brun { fill: #083a5a; }

.pinwheel-rotate-berg {
  transform-origin: 100px 100px;
  animation: spin 3s linear infinite;
}

.pinwheel-container-berg {
  position: fixed;
  top: 60%;
  left: 10%;
  width: 180px;
  height: 280px;
  z-index: 1;
  overflow: visible;
  pointer-events: none;
}

.pinwheel-svg-berg {
  width: 100%;
  height: 100%;
  overflow: visible;
}

.blade-berg {
  fill: #44454b;
  stroke: rgba(0,0,0,0.2);
  stroke-width: 1;

  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.25));

  background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.05));
}

.b1black { 
  fill: #1f1f1f; /* preto escuro suave */
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15)) brightness(1.1) contrast(1.05);
}
.b2black { 
  fill: #1f1f1f; 
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15)) brightness(1.1) contrast(1.05);
}
.b3black { 
  fill: rgb(31, 31, 31);
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.15)) brightness(1.1) contrast(1.05);
}
.b4black { 
  fill: #232323; 
  filter: drop-shadow(0 1px 2px rgba(19, 19, 19, 0.15)) brightness(1.1) contrast(1.05);
}

.b1black, .b2black, .b3black, .b4black {
  filter: url(#paperTexture) drop-shadow(0 1px 2px rgba(0,0,0,0.15)) brightness(1.08) contrast(1.05);
}

.hub-ring-berg { fill: #6F737A; stroke: rgba(0,0,0,0.2); }
.hub-core-berg { fill: #083a5a; }

.pinwheel-rotate-berg {
  transform-origin: 100px 100px;
  animation: spin 3s linear infinite;
}
 
/* ========================================= */
/*                 VARIÁVEIS                 */
/* ========================================= */

:root {
  --portal-glow: rgba(160, 100, 255, 0.15);
  --portal-border: rgba(150, 100, 255, 0.3);
  --portal-smoke-light: rgba(58, 14, 163, 0.45);
  --portal-smoke-dark: rgba(40, 5, 120, 0.55);

  /* Portal Colors */
  --portal-color-1: rgba(120, 60, 255, 1);
  --portal-color-2: rgba(150, 90, 255, 1);
  --portal-color-3: rgba(150, 90, 255, 0.85);
}

/* ========================================= */
/*               CENA REAL                   */
/* ========================================= */

.background {
  position: fixed;
  inset: 0;
  background: url("realworld.png") center/cover no-repeat;
  z-index: -2;
}

/* ========================================= */
/*              PORTAL CONTAINER             */
/* ========================================= */

.portal-container {
  position: absolute;
  top: 10%;
  left: 70%;
  width: 360px;
  height: 360px;
  cursor: pointer;
  overflow: visible;
  border-radius: 50%;
  z-index: 5;
}

/* Layers base */
.portal-image,
.portal-loop {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
}

.portal-image {
  overflow: hidden;
  z-index: 1;
}

.portal-loop {
  overflow: hidden;
  z-index: 0;
}

/* ========================================= */
/*           PORTAL SCROLL (INFINITE)        */
/* ========================================= */

.portal-loop::before,
.portal-loop::after {
  content: "";
  position: absolute;
  inset: 0;
  height: 200%;
  background: url("realworld.png") repeat-y;
  background-size: 100% auto;
  animation: scrollInfinite 25s linear infinite;
}

.portal-loop::after {
  top: 100%;
}

@keyframes scrollInfinite {
  to { transform: translateY(-100%); }
}

/* ========================================= */
/*                GLOW / BORDAS              */
/* ========================================= */

.portal-border {
  position: absolute;
  inset: -15px;
  border-radius: 50%;
  background: radial-gradient(circle, var(--portal-border), transparent 75%);
  filter: blur(20px) brightness(1.2);
  z-index: 2;
  pointer-events: none;
}

.portal-glow {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  pointer-events: none;
  z-index: 4;
  background: radial-gradient(circle, var(--portal-glow) 0%, transparent 80%);
  box-shadow:
    0 0 60px rgba(160, 100, 255, 0.3),
    0 0 120px rgba(120, 60, 220, 0.25);
}

/* ========================================= */
/*                FUMAÇA / TENTÁCULOS        */
/* ========================================= */

.portal-smoke {
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: 50%;
  z-index: 9;
}

.smoke-part {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 32px;
  height: 140px;

  border-radius: 60% 60% 40% 40% / 65% 65% 35% 35%;
  filter: blur(4px);
  will-change: transform;
  opacity: 0.95;

  background: radial-gradient(circle at 100% 20%,
    var(--portal-color-1),
    var(--portal-color-2) 40%,
    var(--portal-color-3) 65%,
    transparent 100%
  );

  transform-origin: center;
  animation: tentacleMove var(--dur) ease-in-out infinite;
}

/* Tentáculo premium */
@keyframes tentacleMove {
  0%,
  100% {
    transform:
      translate(-50%, -50%)
      rotate(var(--angle))
      translate(var(--radius))
      rotate(0deg)
      scaleY(1);
  }
  40% {
    transform:
      translate(-50%, -50%)
      rotate(calc(var(--angle) + var(--wiggle)))
      translate(calc(var(--radius) + var(--push)))
      rotate(14deg)
      scaleY(1.18);
  }
  70% {
    transform:
      translate(-50%, -50%)
      rotate(calc(var(--angle) - var(--wiggle)))
      translate(calc(var(--radius) - var(--push)))
      rotate(-10deg)
      scaleY(0.9);
  }
}

/* ========================================= */
/*         BORDA INTERNA PULSANTE           */
/* ========================================= */

.portal-inner-border {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  pointer-events: none;
  z-index: 50;
  animation: innerPulse 3s ease-in-out infinite;

  box-shadow:
    inset 0 0 25px rgba(180, 120, 255, 0.8),
    inset 0 0 50px rgba(140, 60, 240, 0.6),
    inset 0 0 90px rgba(100, 40, 220, 0.5);
}

@keyframes innerPulse {
  80% {
    box-shadow:
      inset 0 0 55px rgba(200, 150, 255, 0.9),
      inset 0 0 85px rgba(160, 80, 255, 0.75),
      inset 0 0 110px rgba(120, 60, 240, 0.65);
  }
}

/* Importa a fonte */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* ============================= */
/*      BASE GERAL / LAYOUT      */
/* ============================= */
.page-layout {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.text-block {
  position: absolute;
  width: var(--polaroid-size);
  height: var(--polaroid-size);
  max-width: 180px;
  max-height: var(--polaroid-size);
  font-family: 'Press Start 2P', cursive;
  font-size: clamp(16px, 1.2vw, 18px);
  line-height: 1;
  color: black;
  overflow: hidden;
  word-wrap: break-word;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.text-block p { margin: 0; }

/* Específicos */
.text-block.left { top: 40px; left: 10px; }
.text-block.right {
  bottom: 20px;
  left: 52%;
  top: 50%;
  font-size: clamp(12px, 1.2vw, 18px);
  line-height: 1.2;
}

/* Texto dentro da polaroid */
.portrait-container .text-block {
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 16px);
  max-height: calc(100% - 16px);
  font-size: clamp(10px, 1.5vw, 16px);
}

/* Ajustes mobile */
@media (max-width: 600px) {
  .text-block.left,
  .text-block.right {
    position: static;
    max-width: 100%;
    margin-top: 12px;
    height: auto;
  }
}

/* Linha inferior */
.bottom-row {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 0 0 20px 20px;
}

/* ============================= */
/*           POLAROID           */
/* ============================= */
.polaroid {
  --polaroid-size: 180px;
  --photo-size: calc(var(--polaroid-size) - 24px);
  --corner-size: 18px;

  position: absolute;
  width: var(--polaroid-size);
  height: calc(var(--polaroid-size) + 40px);
  padding: 12px 12px 32px;
  background: rgb(231,229,224);
  border-radius: 4px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.22);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow: visible;

  /* Cantos */
  background-image:
    linear-gradient(135deg, black 50%, transparent 50%),
    linear-gradient(225deg, black 50%, transparent 50%),
    linear-gradient(45deg, black 50%, transparent 50%),
    linear-gradient(315deg, black 50%, transparent 50%);
  background-size: var(--corner-size) var(--corner-size);
  background-repeat: no-repeat;
  background-position: top left, top right, bottom left, bottom right;
}

.polaroid .photo {
  width: var(--photo-size);
  height: var(--photo-size);
  background: #e9e9e9;
  border-radius: 2px;
  overflow: hidden;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.45);
}

.polaroid .photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.polaroid .caption {
  position: absolute;
  bottom: 6px;
  left: 12px;
  right: 12px;
  font-size: 12px;
  color: #222;
  opacity: 0.95;
}

.polaroid.top-right { top: 20px; right: 20px; }
.polaroid.bottom-left { bottom: 20px; left: 20px; }

/* ============================= */
/*         FUNDO ANIMADO         */
/* ============================= */
.bg-loop { position: fixed; inset:0; overflow:hidden; z-index:0; }

.bg-layer {
  position: absolute;
  width: 100%;
  height: 100%;
  background: url('fndomori.png') center top/cover no-repeat;
  filter: brightness(0.85) contrast(1.1) saturate(0.8);
  animation: scrollBg 15s linear infinite;
}
.bg-layer:nth-child(2){ top:-100%; }

@keyframes scrollBg { 
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}

.bg-overlay,
.bg-glow,
.bg-particles,
.bg-mist {
  position: absolute;
  inset:0;
  pointer-events:none;
  z-index:1;
}

/* Glow */
.bg-glow {
  background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, transparent 80%);
  animation: glowPulse 6s ease-in-out infinite alternate;
}
@keyframes glowPulse {
  0% { opacity:0.05; }
  100% { opacity:0.15; }
}

/* Partículas */
.particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(255,255,255,0.15);
  border-radius: 50%;
  animation: float 20s linear infinite;
}
@keyframes float {
  0% { transform: translateY(100vh); opacity:0; }
  50% { opacity:1; }
  100% { transform: translateY(-10vh) translateX(50vw); opacity:0; }
}

/* Mist */
.bg-mist {
  background:
    radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 70%),
    radial-gradient(circle, rgba(200,200,255,0.02) 0%, transparent 60%);
  background-size: 200% 200%;
  animation: driftMist 120s linear infinite;
}
@keyframes driftMist {
  0% { background-position: 0% 0%, 100% 100%; }
  50% { background-position: 50% 50%, 50% 50%; }
  100% { background-position: 100% 0%, 0% 100%; }
}

/* Grão */
body::before {
  content:"";
  position: fixed;
  inset:0;
  background: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px);
  background-size: 4px 4px;
  pointer-events:none;
  z-index:0;
}

#vinheta-topo {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 2px;
  background: rgba(111, 39, 170, 0.8);
  border-radius: 4px;
  cursor: grab;
  z-index: 10002;
  transition: top 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

#vinheta-topo:active { cursor: grabbing; }
#vinheta-topo.hidden { opacity: 0; pointer-events: none; }

#frame-jogo {
  position: fixed;
  top: -100%;
  left: 0;
  width: 100vw;
  height: 100vh;
  border: none;
  z-index: 10001;
  transition: top 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

#close-game {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: rgba(255,255,255,0.15);
  color: white;
  font-size: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10003;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s, background 0.3s, transform 0.2s;
}

#close-game.show {
  opacity: 1;
  pointer-events: auto;
}

#close-game:hover {
  background: rgba(255,255,255,0.3);
  transform: scale(1.1);
}
